#include<stdio.h>
#include<conio.h>
 main(){
	int tq[840],tbt[840],tat[840];
	int sq[840],sbt[840],sat[840];
	int n,i,tempa=0,tempb=0,s=0,t=0,bt=0,a,b,j,g,zc=0,tmq=0,time=0;
	char ts;//teacher or student for ip
		printf("__________________Query Management System_________________\n\n");
printf("Enter Number of Queries : ");
scanf("%d",&n);
printf("Please enter the details -\n");
for(i=0;i<n;i++){
	printf("Enter T/t if you are a teacher or Enter S/s if you are a student :");
	scanf(" %c", &ts);
	printf("Enter Burst Time :");
	scanf("%d",&tempb);	
//	printf("%d",&tempb);
	bt=bt+tempb;  //bt-burst time for 14hrs 
	printf("Enter Arival Time :");
	scanf("%d",&tempa);	
	if(ts=='t'||ts=='T'&&bt<=840)
	{
		tbt[t]=tempb;
		tat[t]=tempa;
		t=t+1;
		tq[t]=t+1;
		
		}
		else if(ts=='s'||ts=='S'&&bt<=840) 
	{
		sbt[s]=tempb;
		sat[s]=tempa;
		s=s+1;
		sq[s]=s+1;
		
	}
	}
		printf("Enter Time Quantum :");
	scanf("%d",&tmq);	//time quantum
	
	        for (i = 0; i < s; ++i) // sorting student ques
        {
 
            for (j = i + 1; j < s; ++j)
            {
 
                if (sat[i] > sat[j]) 
                {
 
                    a =  sat[i];   //a and b are temp variables 
                    sat[i] = sat[j];
                    sat[j] = a;
                    b =  sbt[i];
                    sbt[i] = sbt[j];
                    sbt[j] = b;
                    a =  sq[i];
                    sq[i] = sq[j];
                    sq[j] = a;
 
                }
 
            }
 
        }
        for (i = 0; i < t; ++i) // sorting teachers ques
        {
 
            for (j = i + 1; j < t; ++j)
            {
 
                if (tat[i] > tat[j]) 
                {
 
                    a =  tat[i];
                    tat[i] = tat[j];
                    tat[j] = a;  //a and b are temp variables 
                    b =  tbt[i];
                    tbt[i] = tbt[j];
                    tbt[j] = b;
                    b =  tq[i];
                    tq[i] = tq[j];
                    tq[j] = b;
 
                }
 
            }
 
        }
        	i=0;
	j=0;
 while(zc!=t+s){ //loop runs t+s times 
 	while(i!=s||j!=t){
 		if(tat[i]<=time){
 		//	time=time+1;
		 if(i>t){
		 }
		 else if(tbt[i]==0){
		 	zc=zc+1;  //zc is zero count; if all the elements in qres are 0, rrb done
		 }
		 else{
		 	if(tbt[i]==tmq||tbt[i]<tmq){
		 		tbt[i]=0;
		 		time=time+tbt[i];
		 		
			 }
			 else{
			 	tbt[i]=tbt[i]-tmq;
			 }
			 
	}
	i=i+1;
		 	
		 }
		  		if(sat[i]<=time){
		  			//time=time+1;
		 if(j>s){
		 }
		 else if(sbt[j]==0){
		 	zc=zc+1;
		 }
		 else{
		 	if(sbt[j]==tmq||sbt[j]<tmq){
		 		sbt[i]=0;
		 		time=time+sbt[i];
		 		
			 }
			 else{
			 	sbt[j]=sbt[j]-tmq;
			 }
			 
	}
	j=j+1;
		 	
		 }
	 }
 	
 }
	
	
	
}
